<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard | LearnMatrix</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>
    <header>
        <a href="/LearnMatrix/" class="logo">
            <img src="assets/images/logo.png" alt="Compass"
                style="height: 30px; vertical-align: middle; margin-right: 5px;">
            LearnMatrix
        </a>
        <nav>
            <ul>
                <li><a href="/LearnMatrix/">Home</a></li>
                <li><a href="/LearnMatrix/about.html">About</a></li>
                <li><a href="/LearnMatrix/resources.html">Resources</a></li>
                <li><a href="/LearnMatrix/schedule.html">Schedule</a></li>
                <li><a href="/LearnMatrix/quizzes.html">Quiz</a></li>
                <li><a href="/LearnMatrix/dashboard.html" class="active">Dashboard</a></li>
                <li><a href="/LearnMatrix/login.html" class="user-profile"
                        style="color: #fff; text-decoration: none; font-size: 1.2rem;">üë§</a></li>
            </ul>
        </nav>
    </header>

    <main class="dashboard-container">
        <header class="dashboard-header">
            <h1>Welcome back, Akshaj!</h1>
            <p style="color: #ccc;">You're on a 5-day study streak. Keep it up! üî•</p>
        </header>

        <!-- Main Content Column -->
        <div style="display: flex; flex-direction: column; gap: 2rem;">

            <!-- Overall Progress -->
            <section class="dashboard-card">
                <h2>My Progress <span style="font-size: 1rem; color: #888;">Updated 1hr ago</span></h2>

                <div class="progress-item">
                    <div class="progress-header">
                        <span>AP Microeconomics</span>
                        <span>75%</span>
                    </div>
                    <div class="progress-bar-bg">
                        <div class="progress-bar-fill" style="width: 75%;"></div>
                    </div>
                </div>

                <div class="progress-item">
                    <div class="progress-header">
                        <span>AP Macroeconomics</span>
                        <span>40%</span>
                    </div>
                    <div class="progress-bar-bg">
                        <div class="progress-bar-fill" style="width: 40%;"></div>
                    </div>
                </div>

                <div class="progress-item">
                    <div class="progress-header">
                        <span>AP European History</span>
                        <span>15%</span>
                    </div>
                    <div class="progress-bar-bg">
                        <div class="progress-bar-fill" style="width: 15%;"></div>
                    </div>
                </div>
            </section>

            <!-- Recent Activity -->
            <section class="dashboard-card">
                <h2>Recent Activity</h2>

                <div class="activity-item">
                    <div class="activity-icon">üìù</div>
                    <div class="activity-content">
                        <h4>Completed "Supply & Demand" Quiz</h4>
                        <div class="activity-meta">AP Micro ‚Ä¢ Score: 9/10 ‚Ä¢ 2 hours ago</div>
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon">üé•</div>
                    <div class="activity-content">
                        <h4>Watched "Fiscal Policy" Review</h4>
                        <div class="activity-meta">AP Macro ‚Ä¢ 15 mins ‚Ä¢ Yesterday</div>
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon">üìÖ</div>
                    <div class="activity-content">
                        <h4>Registered for "Essay Writing Workshop"</h4>
                        <div class="activity-meta">Schedule ‚Ä¢ Oct 24, 5:30 PM</div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Sidebar Column -->
        <div style="display: flex; flex-direction: column; gap: 2rem;">

            <!-- Quick Stats -->
            <section class="dashboard-card">
                <h2>Stats Overview</h2>
                <div class="stats-grid">
                    <div class="stat-box">
                        <span class="stat-number">12</span>
                        <span class="stat-label">Hours Studied</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-number">85%</span>
                        <span class="stat-label">Avg Quiz Score</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-number">4</span>
                        <span class="stat-label">Courses Active</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-number">üèÜ</span>
                        <span class="stat-label">Top 10%</span>
                    </div>
                </div>
            </section>

            <!-- Upcoming Session -->
            <section class="dashboard-card" style="border-color: var(--primary-color);">
                <h2 style="color: var(--primary-color); border-bottom-color: #333;">Next Up</h2>
                <div style="text-align: center; padding: 1rem 0;">
                    <span style="font-size: 3rem; display: block; margin-bottom: 0.5rem;">‚è∞</span>
                    <h3 style="margin-bottom: 0.5rem;">AP Micro Review</h3>
                    <p style="color: #888; margin-bottom: 1.5rem;">Starts in 2 hours</p>
                    <a href="/LearnMatrix/schedule.html" class="book-btn"
                        style="background: var(--primary-color); color: #000;">Join Session</a>
                </div>
            </section>

        </div>
    </main>

    <footer class="premium-footer">
        <div class="footer-content">
            <div class="footer-brand">
                <a href="/LearnMatrix/" class="logo">LearnMatrix</a>
                <p>Empowering students to learn smarter.</p>
                <p>For AP Students By AP Students</p>
            </div>
            <div class="footer-links">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="/LearnMatrix/">Home</a></li>
                    <li><a href="/LearnMatrix/resources.html">Resources</a></li>
                    <li><a href="/LearnMatrix/schedule.html">Schedule</a></li>
                    <li><a href="/LearnMatrix/dashboard.html">Dashboard</a></li>
                </ul>
            </div>
            <div class="footer-social">
                <h4>Connect</h4>
                <div class="social-icons">
                    <a href="https://www.instagram.com/learnmatrixap/?igsh=NTlycml2aTk0YWdn&utm_source=qr#"
                        class="social-icon" target="_blank">IG</a>
                    <a href="mailto:learnmatrixap@gmail.com" class="social-icon">GM</a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 LearnMatrix. All rights reserved.</p>
        </div>
    </footer>
    <script src="assets/js/script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // 1. Load User data
            const user = localStorage.getItem('matrixUser') || 'Akshaj';
            document.querySelector('.dashboard-header h1').innerText = `Welcome back, ${user}!`;

            // 2. Load Progress
            const progress = MatrixData.getProgress();
            const progressContainer = document.querySelector('.dashboard-card:first-of-type');
            const progressHeader = progressContainer.querySelector('h2');
            progressContainer.innerHTML = '';
            progressContainer.appendChild(progressHeader);

            if (Object.keys(progress).length > 0) {
                // Add real progress items
                for (const [course, percent] of Object.entries(progress)) {
                    const item = document.createElement('div');
                    item.className = 'progress-item';
                    item.innerHTML = `
                        <div class="progress-header">
                            <span>${course}</span>
                            <span>${percent}%</span>
                        </div>
                        <div class="progress-bar-bg">
                            <div class="progress-bar-fill" style="width: ${percent}%;"></div>
                        </div>
                    `;
                    progressContainer.appendChild(item);
                }
            } else {
                const emptyMsg = document.createElement('p');
                emptyMsg.style.color = '#888';
                emptyMsg.style.marginTop = '1rem';
                emptyMsg.innerText = 'No progress tracked yet. Start a quiz to see your progress!';
                progressContainer.appendChild(emptyMsg);
            }

            // 3. Load Recent Activity
            const activities = MatrixData.getActivities();
            const activitySection = document.querySelector('.dashboard-card:nth-of-type(2)');
            const activityHeader = activitySection.querySelector('h2');
            activitySection.innerHTML = '';
            activitySection.appendChild(activityHeader);

            if (activities.length > 0) {
                activities.forEach(act => {
                    const icon = act.type === 'quiz' ? 'üìù' : 'üé•';
                    const item = document.createElement('div');
                    item.className = 'activity-item';

                    // Simple relative time calculation
                    const date = new Date(act.timestamp);
                    const diff = (new Date() - date) / 1000;
                    let timeStr = 'Just now';
                    if (diff > 86400) timeStr = `${Math.floor(diff / 86400)}d ago`;
                    else if (diff > 3600) timeStr = `${Math.floor(diff / 3600)}h ago`;
                    else if (diff > 60) timeStr = `${Math.floor(diff / 60)}m ago`;

                    item.innerHTML = `
                        <div class="activity-icon">${icon}</div>
                        <div class="activity-content">
                            <h4>${act.title}</h4>
                            <div class="activity-meta">${act.meta} ‚Ä¢ ${timeStr}</div>
                        </div>
                    `;
                    activitySection.appendChild(item);
                });
            } else {
                const emptyMsg = document.createElement('p');
                emptyMsg.style.color = '#888';
                emptyMsg.style.marginTop = '1rem';
                emptyMsg.innerText = 'Your recent learning activities will appear here.';
                activitySection.appendChild(emptyMsg);
            }

            // 4. Load Stats
            const stats = MatrixData.getStats();
            const statsGrid = document.querySelector('.stats-grid');
            if (statsGrid) {
                const boxes = statsGrid.querySelectorAll('.stat-box');
                boxes[0].querySelector('.stat-number').innerText = stats.hours || '0';
                boxes[1].querySelector('.stat-number').innerText = (stats.avgScore || '0') + '%';
                boxes[2].querySelector('.stat-number').innerText = Object.keys(progress).length || '0';
            }
        });
    </script>
</body>

</html>